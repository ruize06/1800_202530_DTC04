import{h as D,i as L,q as f,w as p,c as m,d as i,g as y,e as N}from"./style-gcIZDgIN.js";import"./bottom-nav-3YuBZoxf.js";import"./top-nav-DYIFfsg9.js";import{b as k,h as x,s as F}from"./popup-form-header-TXQSeuBU.js";document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("addGroupPopup"),v=document.getElementById("addGroupBtn"),w=a.querySelector(".cancelButton"),G=document.getElementById("createNewGroupForm"),u=document.getElementById("groupList"),s=document.getElementById("addGroupName"),l=document.getElementById("noGroupName");let c=null;function g(t,d,o){const e=document.createElement("div");e.className=`
            text-center from-[var(--secondary-bg-color)] to-[var(--gradient-bg-color)] bg-gradient-to-br
            px-6 py-2 flex flex-row justify-between rounded-full shadow-lg hover:scale-105 transition-transform duration-200`;const n=document.createElement("h1");n.textContent=d,n.className="font-bold",e.appendChild(n);const r=document.createElement("h1");return r.textContent=`Tasks: ${o||0}`,r.className="font-semibold",e.appendChild(r),e.addEventListener("click",async()=>{localStorage.setItem("todoGroupID",t),window.location.href="/todo.html?type=group"}),e}async function E(){const t=f(m(i,"groups"),p("members","array-contains",c)),d=await y(t);u.innerHTML="";for(const o of d.docs){const e=o.data(),n=o.id,r=f(m(i,"tasks"),p("ownerID","==",n),p("completed","!=","true")),B=await y(r),C=g(n,e.name,B.docs.length);u.appendChild(C)}}function b(){F(a),a.focus()}function h(){x(a)}async function I(t){if(t.preventDefault(),!s.value.trim()){l.classList.remove("hidden");return}const o=(await N(m(i,"groups"),{name:s.value.trim(),createdBy:c,createdAt:Date.now(),members:[c]})).id,e=g(o,s.value.trim());u.appendChild(e),s.value="",l.classList.add("hidden"),h()}D(L,t=>{c=t.uid,E()}),k(v,w,a,b,h),G.addEventListener("submit",I)});
